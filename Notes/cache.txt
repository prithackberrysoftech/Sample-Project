ğŸŒŸ What is Caching? (High-Level)

Caching means saving results of expensive work so you donâ€™t recompute them every time someone visits a page or requests data.
This helps make your Django site faster and more scalable.

Example:

	1.Render page once
	2.Store it in cache
	3.Next request: return from cache instead of rebuilding



ğŸ› ï¸ 1) How Django Caching Works
	
	Django caching is managed via the CACHES setting in settings.py.
	It supports multiple cache backends â€” different places to store cached data, such as Memory, Filesystem, Redis, Database, etc.
	
	
ğŸ·ï¸ 2) Configure Cache Backends
	A) In-memory (default)
	B) Filesystem Cache
	C) Database Cache
	D) Redis Cache
	
ğŸ“Œ 3) Important Cache Settings
	All cache backends support:
	
	| Setting      | Meaning                                                 |                       |
	| ------------ | ------------------------------------------------------- | --------------------- |
	| `TIMEOUT`    | Seconds before cache expires (default 300 sec)          |                       |
	| `KEY_PREFIX` | A string to prepend to keys (useful if multiple caches) |                       |
	| `VERSION`    | Version number for keys (for namespacing)               |                       |
	| `OPTIONS`    | Backend-specific options (for Redis, Memcached)         | ([Django Project][1]) |

	[1]: https://docs.djangoproject.com/en/6.0/topics/cache/ "Djangoâ€™s cache framework | Django documentation | Django"
	
	CACHES = {
		"default": {
			"BACKEND": "django.core.cache.backends.filebased.FileBasedCache",
			"LOCATION": "/var/tmp/django_cache",
			"TIMEOUT": 600,  # 10 mins
		}
	}

ğŸ”¥ 4) Ways to Use Cache
	ğŸª„ A) Per-site cache (whole site)
	â±ï¸ B) Per-view cache
	ğŸ° C) Template Fragment Cache
	ğŸ§  D) Low-level Cache API
	
	
âš™ï¸ 5) When to Use Which Cache?

| Use case              | Recommended         |
| --------------------- | ------------------- |
| Dev/testing           | Dummy / LocalMemory |
| Small site            | File or Database    |
| Medium / high traffic | Redis / Memcached   |
| Page fragment caching | Template fragment   |
| View output caching   | Per-view cache      |




============================= Redis ================================

Django Redis cache config (settings.py)

CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.redis.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379/1",
        "OPTIONS": {
            "db": 1,
        },
        "TIMEOUT": 300,  # default 5 minutes
    }
}


------------------------------------------
A) Per-Site Cache (Whole Site) with Redis
------------------------------------------

âœ… Step A1: Middleware order set àª•àª°à«‹


MIDDLEWARE = [
    "django.middleware.cache.UpdateCacheMiddleware",  # FIRST
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
    "django.middleware.cache.FetchFromCacheMiddleware",  # LAST
]


âœ… Step A2: Cache middleware settings

CACHE_MIDDLEWARE_ALIAS = "default"
CACHE_MIDDLEWARE_SECONDS = 600  # 10 minutes
CACHE_MIDDLEWARE_KEY_PREFIX = "mysite"


âœ… Step A3: Example view
# views.py
from django.http import HttpResponse
import datetime

def home(request):
    return HttpResponse(
        f"Home page time: {datetime.datetime.now()}"
    )
	
ğŸ§ª Test

Browser open /

Refresh many times

Time same (10 min)

âœ” Whole site cached in Redis

â— Warning

âŒ Login pages
âŒ User dashboards
âŒ Cart / profile pages

ğŸ‘‰ Mostly static sites only

==============================================================
B) Per-View Cache with Redis

ğŸ‘‰ Most used & safest approach ğŸ”¥

âœ… Step B1: Import decorator
from django.views.decorators.cache import cache_page

âœ… Step B2: Cache specific view
@cache_page(60 * 5)  # 5 minutes
def about(request):
    return HttpResponse(
        f"About page time: {datetime.datetime.now()}"
    )

âœ… Step B3: URL
# urls.py
path("about/", about),

ğŸ§ª Test

Reload /about/

Time fixed for 5 minutes

Redis stores page output

----------------------------------------------------------------------------


ğŸ° C) Template Fragment Cache with Redis

ğŸ‘‰ Page àª¨à«‹ only expensive part cache àª•àª°à«‹

Example:

Homepage:

Header = dynamic

Sidebar = expensive (popular posts)

âœ… Step C1: Template load
{% load cache %}

âœ… Step C2: Cache block
{% cache 600 sidebar %}
    <h3>Popular Posts</h3>
    {% for post in popular_posts %}
        <p>{{ post.title }}</p>
    {% endfor %}
{% endcache %}


â±ï¸ Sidebar cached for 10 minutes in Redis

âœ… Step C3: Dynamic cache key (per user)
{% cache 300 sidebar request.user.id %}
    Welcome {{ request.user.username }}
{% endcache %}


ğŸ‘‰ Each user gets separate cache entry

ğŸ§ª Test

	Reload page
	DB hit only once
	Redis serves HTML fragment
	
	